<!DOCTYPE html>
<html lang="en-US">

<head></head>

<body>
    <div class="module company-tabs">
        <div class="w-1290 padding">                                        
            <div class="inside">
                <div id="categories" class="flex-container flex-wrap justify-content-center margin"></div>
            </div>
        </div>
    </div>
    <div class="module companies-boxes">
        <div class="w-1290 padding">
            <div class="inside">
                <div id="companies" class="flex-container flex-wrap justify-content-center margin"></div>
            </div>
        </div>
    </div>

    <script
			  src="https://code.jquery.com/jquery-1.12.4.min.js"
			  integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ="
			  crossorigin="anonymous"></script> 
    <script src="airtable.browser.js"></script> 
</body>

<script>
    var Airtable = require('airtable');
    // Get a base ID for an instance of art gallery example
    var base = new Airtable({ apiKey: 'keyTY1I80D24xwvqb' }).base('appYiwh38k0MHJSPq');
    
    var loadCategories = function() {
        $('#categories').empty();

        base('Digital Commerce Categories').select({
            sort: [
                {field: 'Name', direction: 'asc'}
            ]
        }).eachPage(function page(records, fetchNextPage) {
            var $categoryAll = $('<label class="inside popup active-tab-label">').text("All");
            $('#categories').append($categoryAll);
            records.forEach(function(record) {
                console.log('Retrieved ', record.get('Name'));
    
                var $categoryLabel = $('<label class="inside popup">');
                $categoryLabel.text(record.get('Name'));
                $categoryLabel.attr('label-category', record.getId());
    
                $('#categories').append($categoryLabel);
            });
    
            fetchNextPage();
        }, function done(error) {
            console.log(error);
        });
    }

    loadCategories();

    var loadCompanies = function() {
        $('#companies').empty();
    
        base('Digital Commerce Database').select({
            sort: [
                {field: 'Business Name', direction: 'asc'}
            ]
        }).eachPage(function page(records, fetchNextPage) {
            records.forEach(function(record) {
                console.log('Retrieved ', record.get('Business Name'));
    
                var $companyInfo = $('<div class="inside popup">');
                $companyInfo.attr('data-category', record.get('Category'));
                $companyInfo.append($('<img>').attr("src", record.get('Logo')[0]['thumbnails']['small']['url']).attr("alt", record.get('Business Name')));
                $companyInfo.append($('<i class="bfa-icon-plus">'));
                var $companyDetails =  $('<div class="flex-container flex-wrap justify-content-center justify-items-center align-content-center align-items-center">');
                $companyDetails.append($('<h4>').text(record.get('Business Name')));
                $companyDetails.append($('<p>').text(record.get('Description')));
                $companyInfo.append($companyDetails);
    
                var $companySection = $('<section>');
                $companySection.append($companyInfo);
                $('#companies').append($companySection);
            });
    
            fetchNextPage();
        }, function done(error) {
            console.log(error);
        });
    };
    
    loadCompanies();
    
</script>

</html>
<!-- WP Fastest Cache file was created in 0.4046618938446 seconds, on 22-10-20 19:22:09 -->